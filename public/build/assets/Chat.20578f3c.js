/* empty css                  */import{r as n,o as E,E as C,a as c,c as M,b as V,u as B,d as t,e as m,w as N,f as S,g as T,h as j,v as I,F as P,i as p,j as a,k as b,H as A,l as F}from"./app.dfece0eb.js";import{_ as H}from"./BotBubble.b554c9c1.js";import L from"./RegisterChatPanel.65d947a7.js";import $ from"./ChatPanel.0bc85e30.js";import"./plugin-vue_export-helper.21dcd24c.js";const z={class:"bg-gray-100 h-screen"},D={class:"flex flex-col h-screen mx-40 p-5 bg-white rounded"},O={class:"w-full border-b pb-2 flex justify-between"},R=t("div",{class:"flex"},[t("div",{class:"rounded-full overflow-hidden w-20 h-20 ring-2 ring-white bg-blue-400 mr-5"},[t("img",{src:H,alt:"chatbot-female"})]),t("div",{class:"my-5 text-lg font-bold"},"Virtual Telecomm Assistant")],-1),U=F("End Chat"),W={class:"flex-1 flex flex-col-reverse overflow-y-auto p-5"},q=["onSubmit"],G=["disabled"],J=["disabled"],se={props:{conversation:{type:Object,default:()=>({})}},setup(o){const d=o,u=n([]),l=n(!1),g=n(!1),i=n(""),f=n(!1),x=()=>{let e=p().props.value.flash.success;f.value=!0,e&&a.success({title:"Success",message:p().props.value.flash.success}),h()};function y(e){return new Promise(s=>setTimeout(s,e))}const _=async()=>{l.value=!0,await axios.post(route("chat.end")).then(e=>{v(e.data.data),f.value=!1,a.success({title:"Success",message:e.data.message})}).catch(e=>{a.error({title:"Error",message:e.response.data.message})}).finally(()=>{l.value=!1})},h=async()=>{l.value=!0,await axios.get(route("chat.messages")).then(e=>{if(e.data.length===0)return b.Inertia.get(route("chat.index"));u.value=e.data}).catch(e=>{a.error({title:"Error",message:e.response.data.message})}).finally(()=>{l.value=!1})},v=async e=>{for(let s=0;s<e.length;s++){let r=e[s];u.value.unshift(r),r.client_id!=null&&await y(2e3)}},w=async()=>{g.value=!0;let e=i.value;i.value="",d.conversation==null&&a.warning({message:"Please fill in your details in the form below to start conversation"}),await axios.post(route("chat.message"),{clientId:d.conversation.client_id,message:e}).then(s=>{if(s.data.length===0)return b.Inertia.get(route("chat.index"));v(s.data.data)}).catch(s=>{a.error({title:"Error",message:s.response.data.message})}).finally(()=>{g.value=!1})};return E(async()=>{d.conversation!=null&&await h()}),(e,s)=>{const r=C;return c(),M(P,null,[V(B(A),{title:"Welcome to our network support"}),t("div",z,[t("div",D,[t("div",O,[R,f.value?(c(),m(r,{key:0,type:"danger",size:"large",onClick:_},{default:N(()=>[U]),_:1})):S("",!0)]),t("div",W,[o.conversation==null?(c(),m(L,{key:0})):(c(),m($,{key:1,"conversation-id":o.conversation.id,messages:u.value,onRegistered:x},null,8,["conversation-id","messages"]))]),t("form",{class:"flex justify-center",onSubmit:T(w,["prevent"])},[j(t("input",{type:"text",class:"bg-gray-200 rounded-lg p-2 flex-1 mr-4 focus:bg-gray-50","onUpdate:modelValue":s[0]||(s[0]=k=>i.value=k),placeholder:"Type your message here...",disabled:o.conversation===null},null,8,G),[[I,i.value]]),t("button",{class:"bg-indigo-500 px-6 py-2 rounded-md text-white",disabled:o.conversation===null},"Send",8,J)],40,q)])])],64)}}};export{se as default};
